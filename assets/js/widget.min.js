!function(){var e={338:function(e,t,n){"use strict";var o=n(795);t.H=o.createRoot,o.hydrateRoot},556:function(e,t,n){e.exports=n(694)()},694:function(e,t,n){"use strict";var o=n(925);function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,i,s){if(s!==o){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},795:function(e){"use strict";e.exports=window.ReactDOM},925:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};!function(){"use strict";n.r(o),n.d(o,{default:function(){return T}});var e=window.React,t=n.n(e),r=n(338),i=n(556),s=n.n(i),a=window.ReactJSXRuntime;const c=({isVisible:e,onToggleVisibility:t,onClose:n,conversation:o,isTyping:r,connectionStatus:i,onSendMessage:s,config:c,userContext:l,pageContext:d,error:u,onDismissError:p})=>(0,a.jsxs)("div",{className:"chat-widget "+(e?"visible":"minimized"),role:"dialog","aria-label":"AI Assistant Chat","aria-expanded":e,children:[!e&&(0,a.jsx)("button",{className:"chat-toggle-button",onClick:t,"aria-label":"Open AI Assistant Chat",title:"Chat with AI Assistant",children:"ðŸ’¬"}),e&&(0,a.jsxs)("div",{className:"chat-window",children:[(0,a.jsxs)("div",{className:"chat-header",children:[(0,a.jsx)("h3",{children:"AI Assistant"}),(0,a.jsxs)("div",{className:"chat-controls",children:[(0,a.jsx)("button",{className:"minimize-button",onClick:t,"aria-label":"Minimize chat",title:"Minimize",children:"âˆ’"}),(0,a.jsx)("button",{className:"close-button",onClick:n,"aria-label":"Close chat",title:"Close",children:"Ã—"})]})]}),(0,a.jsxs)("div",{className:"chat-content",children:[(0,a.jsx)("p",{children:"Chat widget is ready! (Implementation in progress)"}),(0,a.jsxs)("p",{children:["Connection: ",i]}),(0,a.jsxs)("p",{children:["User ID: ",null==l?void 0:l.id]}),(0,a.jsxs)("p",{children:["Page: ",null==d?void 0:d.type]}),u&&(0,a.jsxs)("div",{className:"error-message",children:["Error: ",u.message,(0,a.jsx)("button",{onClick:p,children:"Dismiss"})]})]})]})]});l=c,c.propTypes={isVisible:s().bool.isRequired,onToggleVisibility:s().func.isRequired,onClose:s().func.isRequired,conversation:s().array,isTyping:s().bool,connectionStatus:s().oneOf(["connected","connecting","disconnected","error"]),onSendMessage:s().func.isRequired,config:s().object.isRequired,userContext:s().object.isRequired,pageContext:s().object.isRequired,error:s().object,onDismissError:s().func.isRequired},c.defaultProps={conversation:[],isTyping:!1,connectionStatus:"connecting",error:null};var l,d=c;$RefreshReg$(l,"ChatWidget");class u extends t().Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError({error:e,errorInfo:t,timestamp:(new Date).toISOString()})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,a.jsx)("div",{className:"error-boundary-fallback",role:"alert","aria-live":"polite",children:(0,a.jsxs)("div",{className:"error-content",children:[(0,a.jsx)("h4",{children:"Something went wrong"}),(0,a.jsx)("p",{children:"The chat widget encountered an error. Please refresh the page to try again."}),(0,a.jsxs)("div",{className:"error-actions",children:[(0,a.jsx)("button",{className:"retry-button",onClick:()=>window.location.reload(),type:"button",children:"Refresh Page"}),this.props.onRetry&&(0,a.jsx)("button",{className:"retry-button",onClick:()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onRetry()},type:"button",children:"Try Again"})]}),!1]})}):this.props.children}}u.propTypes={children:s().node.isRequired,onError:s().func,onRetry:s().func,fallback:s().node},u.defaultProps={onError:null,onRetry:null,fallback:null};var p=u,g=$RefreshSig$();function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b=(0,e.createContext)(null);g(()=>{g();const t=(0,e.useContext)(b);if(!t)throw new Error("useApi must be used within an ApiProvider");return t},"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=");const y=({children:e,baseUrl:t,nonce:n,debug:o=!1})=>{const r={baseUrl:t,nonce:n,debug:o,async request(e,o={}){const r=`${t}/${e.replace(/^\//,"")}`,i=h({method:"GET",headers:h({"Content-Type":"application/json","X-WP-Nonce":n},o.headers)},o);i.body&&"object"==typeof i.body&&(i.body=JSON.stringify(i.body));try{const e=await fetch(r,i),t=await e.json();if(!e.ok)throw new Error(t.message||"API request failed");return t}catch(s){throw s}},async sendMessage(e,t){return this.request("chat/send",{method:"POST",body:{message:e,conversationId:t}})},async getConversation(e){return this.request(`chat/conversation/${e}`)},async getConversations(){return this.request("chat/conversations")}};return(0,a.jsx)(b.Provider,{value:r,children:e})};var w;w=y,y.propTypes={children:s().node.isRequired,baseUrl:s().string.isRequired,nonce:s().string.isRequired,debug:s().bool},y.defaultProps={debug:!1},$RefreshReg$(w,"ApiProvider");var v=$RefreshSig$();const x=({apiEndpoint:t,nonce:n,userId:o,pageContext:r,onError:i})=>{v();const[s,a]=(0,e.useState)([]),[c,l]=(0,e.useState)(!1),[d,u]=(0,e.useState)("connecting"),[p,g]=(0,e.useState)(null);(0,e.useEffect)(()=>{(async()=>{try{u("connecting"),await new Promise(e=>setTimeout(e,1e3)),u("connected"),g(`conv_${Date.now()}_${o}`)}catch(e){u("error"),i&&i({message:"Failed to connect to chat service",type:"connection_error",critical:!1})}})()},[t,n,o,i]);const m=(0,e.useCallback)(async e=>{if(!e.trim()||!p)return;const t={id:`msg_${Date.now()}`,text:e.trim(),sender:"user",timestamp:(new Date).toISOString()};a(e=>[...e,t]),l(!0);try{await new Promise(e=>setTimeout(e,1500));const t={id:`msg_${Date.now()+1}`,text:`Thank you for your message: "${e}". This is a placeholder response. The actual AI integration will be implemented in later tasks.`,sender:"assistant",timestamp:(new Date).toISOString()};a(e=>[...e,t]),l(!1)}catch(n){l(!1),i&&i({message:"Failed to send message",type:"send_error",critical:!1})}},[p,i]),h=(0,e.useCallback)(()=>{a([]),g(`conv_${Date.now()}_${o}`)},[o]),f=(0,e.useCallback)(async()=>{u("connecting");try{await new Promise(e=>setTimeout(e,1e3)),u("connected")}catch(e){u("error"),i&&i({message:"Failed to reconnect",type:"reconnection_error",critical:!1})}},[i]);return{conversation:s,isTyping:c,connectionStatus:d,conversationId:p,sendMessage:m,clearConversation:h,reconnect:f}};v(x,"t3jBQS7NNO/SnLtWVeBYZ6URZ1w=");var j=$RefreshSig$();const A=({isVisible:t,onToggleVisibility:n,onEscape:o})=>{j(),(0,e.useEffect)(()=>{const e=e=>{"Escape"===e.key&&t&&o&&(e.preventDefault(),o()),(e.ctrlKey||e.metaKey)&&e.shiftKey&&"c"===e.key.toLowerCase()&&n&&(e.preventDefault(),n()),"Enter"===e.key&&e.target.matches("[data-chat-action]")&&(e.preventDefault(),e.target.click())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,n,o]),(0,e.useEffect)(()=>{if(t){const e=document.querySelector('.woo-ai-assistant-app[data-visible="true"]');if(e){const t=e.querySelector('button, input, textarea, select, [tabindex]:not([tabindex="-1"])');t&&t.focus()}}},[t])};j(A,"3ubReDTFssvu4DHeldAg55cW/CI=");var S=$RefreshSig$();const E=({widgetId:t,config:n})=>{S();const[o,r]=(0,e.useState)(!n.minimized),[i,s]=(0,e.useState)(!1),[c,l]=(0,e.useState)(null),{conversation:u,isTyping:g,connectionStatus:m,sendMessage:h,clearConversation:f,reconnect:b}=x({apiEndpoint:n.apiEndpoint,nonce:n.nonce,userId:n.userId,pageContext:{type:n.pageType,id:n.pageId,url:n.pageUrl},onError:l});A({isVisible:o,onToggleVisibility:()=>r(!o),onEscape:()=>r(!1)});const w=(0,e.useCallback)(()=>{r(e=>!e),!o&&c&&l(null)},[o,c]),v=(0,e.useCallback)(()=>{r(!1)},[]);return(0,e.useEffect)(()=>{if(n.autoOpen&&!o){const e=setTimeout(()=>{r(!0)},2e3);return()=>clearTimeout(e)}},[n.autoOpen,o]),(0,e.useEffect)(()=>{s(!0);const e=document.getElementById(t);return e&&e.setAttribute("data-widget-loaded","true"),()=>{e&&e.removeAttribute("data-widget-loaded")}},[t]),(0,e.useEffect)(()=>{n.isDebug},[t,n,o,m]),c&&c.critical?(0,a.jsx)("div",{className:"woo-ai-widget-error",role:"alert","aria-live":"polite",children:(0,a.jsxs)("div",{className:"error-content",children:[(0,a.jsx)("h4",{children:"Chat Unavailable"}),(0,a.jsx)("p",{children:"The chat service is temporarily unavailable. Please try again later or contact support."}),n.isDebug&&(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{children:"Error Details"}),(0,a.jsx)("pre",{children:c.message})]})]})}):(0,a.jsx)(p,{onError:e=>{n.isDebug&&l({message:e.error.message,stack:e.errorInfo.componentStack,critical:!1})},children:(0,a.jsx)(y,{baseUrl:n.apiEndpoint,nonce:n.nonce,debug:n.isDebug,children:(0,a.jsx)("div",{className:`woo-ai-assistant-app ${n.theme}`,"data-widget-id":t,"data-position":n.position,"data-visible":o,"data-loaded":i,style:{"--widget-primary-color":n.primaryColor||"#007cba","--widget-secondary-color":n.secondaryColor||"#f0f0f1","--widget-text-color":n.textColor||"#1e1e1e","--widget-border-radius":n.borderRadius||"8px"},children:(0,a.jsx)(d,{isVisible:o,onToggleVisibility:w,onClose:v,conversation:u,isTyping:g,connectionStatus:m,onSendMessage:h,onClearConversation:f,onReconnect:b,config:{welcomeMessage:n.welcomeMessage,language:n.language,theme:n.theme,position:n.position,strings:window.wooAiAssistant.strings||{},limits:window.wooAiAssistant.limits||{}},userContext:{id:n.userId,email:n.userEmail},pageContext:{type:n.pageType,id:n.pageId,url:n.pageUrl},error:c,onDismissError:()=>l(null)})})})})};S(E,"/OhsGinlyG7kxVcokcsYvWU+EyM=",!1,function(){return[x,A]}),C=E,E.propTypes={widgetId:s().string.isRequired,config:s().shape({position:s().oneOf(["bottom-left","bottom-right","top-left","top-right"]),autoOpen:s().bool,minimized:s().bool,userId:s().number,userEmail:s().string,pageType:s().string,pageId:s().number,pageUrl:s().string,welcomeMessage:s().string,theme:s().oneOf(["light","dark","auto"]),language:s().string,primaryColor:s().string,secondaryColor:s().string,textColor:s().string,borderRadius:s().string,apiEndpoint:s().string.isRequired,nonce:s().string.isRequired,isDebug:s().bool,pluginVersion:s().string}).isRequired},E.defaultProps={config:{position:"bottom-right",autoOpen:!1,minimized:!0,theme:"light",language:"en",isDebug:!1}};var C,R=E;$RefreshReg$(C,"App");const O=()=>{if(void 0===window.wooAiAssistant)return;const e=document.querySelectorAll("[data-woo-ai-widget]");if(0===e.length){const t=document.createElement("div");t.id="woo-ai-assistant-widget",t.setAttribute("data-woo-ai-widget","true"),document.body.appendChild(t),e=[t]}e.forEach((e,n)=>{var o,i,s,c,l;const d=`woo-ai-widget-${n}`;e.id=d;const u={position:e.getAttribute("data-position")||"bottom-right",autoOpen:"true"===e.getAttribute("data-auto-open"),minimized:"false"!==e.getAttribute("data-minimized"),userId:(null===(o=window.wooAiAssistant.currentUser)||void 0===o?void 0:o.id)||0,userEmail:(null===(i=window.wooAiAssistant.currentUser)||void 0===i?void 0:i.email)||"",pageType:(null===(s=window.wooAiAssistant.currentPage)||void 0===s?void 0:s.type)||"unknown",pageId:(null===(c=window.wooAiAssistant.currentPage)||void 0===c?void 0:c.id)||0,pageUrl:(null===(l=window.wooAiAssistant.currentPage)||void 0===l?void 0:l.url)||window.location.href,welcomeMessage:e.getAttribute("data-welcome-message")||"",theme:e.getAttribute("data-theme")||"light",language:e.getAttribute("data-language")||"en",apiEndpoint:window.wooAiAssistant.apiUrl,nonce:window.wooAiAssistant.nonce,pluginVersion:window.wooAiAssistant.version,isDebug:window.wooAiAssistant.debug||!1};try{const n=(0,r.H)(e);n.render((0,a.jsx)(t().StrictMode,{children:(0,a.jsx)(R,{widgetId:d,config:u})})),e._reactRoot=n}catch(p){e.innerHTML=`\n        <div style="\n          background: #f8d7da; \n          color: #721c24; \n          padding: 12px; \n          border-radius: 4px; \n          border: 1px solid #f5c6cb;\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n          font-size: 14px;\n        ">\n          <strong>Woo AI Assistant Error:</strong> Failed to initialize chat widget.\n          ${u.isDebug?`<br><small>${p.message}</small>`:""}\n        </div>\n      `}})};"complete"!==document.readyState&&"interactive"!==document.readyState||setTimeout(O,100),document.addEventListener("DOMContentLoaded",O),window.addEventListener("load",O),"undefined"!=typeof jQuery&&jQuery(document).ready(O),window.WooAiAssistant={init:O,reinit:()=>{document.querySelectorAll("[data-woo-ai-widget]").forEach(e=>{e._reactRoot&&(e._reactRoot.unmount(),e._reactRoot=null)}),O()},isLoaded:()=>document.querySelectorAll('[data-woo-ai-widget] [data-widget-loaded="true"]').length>0,getInstances:()=>Array.from(document.querySelectorAll("[data-woo-ai-widget]")).filter(e=>e._reactRoot).map(e=>({id:e.id,container:e,root:e._reactRoot}))};var T=window.WooAiAssistant}(),window.WooAiAssistant=o}();